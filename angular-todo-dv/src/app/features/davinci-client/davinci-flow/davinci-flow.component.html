<!--
angular-todo-prototype

davinci-flow.component.html

Copyright (c) 2021 ForgeRock. All rights reserved.
This software may be modified and distributed under the terms
of the MIT license. See the LICENSE file for details.
-->
<form (submit)="submitHandler($event)">
  <h2 *ngIf="pageHeader">{{ pageHeader }}</h2>
  <app-error-message *ngIf="errorMessage" [message]="errorMessage" />
  <ng-container *ngIf="!errorMessage && collectors.length">
    <ng-container *ngFor="let collector of collectors">
      <app-protect
        *ngIf="collector.type === 'TextCollector' && collector.name === 'protectsdk'"
        [label]="collector.output.label"
        (protectProfile)="davinciClient.update(collector)($event)"
      />
      <app-text-input
        *ngIf="collector.type === 'TextCollector' && collector.name !== 'protectsdk'"
        [key]="collector.output.key"
        [label]="collector.output.label"
        (valueUpdated)="updateValue($event, collector)"
      />
      <app-password
        *ngIf="collector.type === 'PasswordCollector'"
        [key]="collector.output.key"
        [label]="collector.output.label"
        (valueUpdated)="updateValue($event, collector)"
      />
      <app-submit-button
        *ngIf="collector.type === 'SubmitCollector'"
        [key]="collector.output.key"
        [label]="collector.output.label"
        [submittingForm]="isSubmittingForm"
      />
      <app-flow-button
        *ngIf="collector.type === 'FlowCollector'"
        [label]="collector.output.label"
        (clicked)="onFlowButtonClicked(collector)"
      />
    </ng-container>
  </ng-container>
</form>
