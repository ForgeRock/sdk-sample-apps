<!--
angular-todo-prototype

davinci-flow.component.html

Copyright (c) 2021 ForgeRock. All rights reserved.
This software may be modified and distributed under the terms
of the MIT license. See the LICENSE file for details.
-->
<form (submit)="submitHandler($event)">
  @if (pageHeader) {
    <h2>{{ pageHeader }}</h2>
  }
  @if (errorMessage) {
    <app-error-message [message]="errorMessage" />
  }
  @if (collectors.length) {
    @for (collector of collectors; track collector) {
      @if (collector.type === 'TextCollector' && collector.name === 'protectsdk') {
        <app-protect
          [label]="collector.output.label"
          (protectProfile)="updateCollector(davinciClient.update(collector), $event)"
          />
      }
      @if (collector.type === 'TextCollector' && collector.name !== 'protectsdk') {
        <app-text-input
          [key]="collector.output.key"
          [label]="collector.output.label"
          (valueUpdated)="updateCollector(davinciClient.update(collector), $event)"
          />
      }
      @if (collector.type === 'PasswordCollector') {
        <app-password
          [key]="collector.output.key"
          [label]="collector.output.label"
          (valueUpdated)="updateCollector(davinciClient.update(collector), $event)"
          />
      }
      @if (collector.type === 'SubmitCollector') {
        <app-submit-button
          [key]="collector.output.key"
          [label]="collector.output.label"
          [submittingForm]="isSubmittingForm"
          />
      }
      @if (collector.type === 'FlowCollector') {
        <app-flow-button
          [label]="collector.output.label"
          (clicked)="onFlowButtonClicked(collector)"
          />
      }
    }
  }
</form>
